@inherits LayoutComponentBase
@using MudBlazor
@using BlazorWASM.Services.ClientInterfaces
@inject NavigationManager NavigationManager
@inject IAuthService AuthService; 


<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="1">
        <MudText Typo="Typo.h5" Class="ml-3">NOT Reddit</MudText>
        <MudSpacer/>
        <AuthorizeView>
            <NotAuthorized>
                <MudIconButton OnClick="@Register" Icon="@Icons.Material.Filled.AppRegistration" Color="Color.Inherit" Edge="Edge.End"/>
                <MudIconButton OnClick="@Login" Icon="@Icons.Material.Filled.Login" Color="Color.Inherit" Edge="Edge.End"/>
            </NotAuthorized>
            <Authorized>
                <MudText> Logged in as: @context.User.Identity.Name</MudText>
                <MudIconButton OnClick="@Logout" Icon="@Icons.Material.Filled.Logout" Color="Color.Inherit" Edge="Edge.End"/>
            </Authorized>
        </AuthorizeView>
    </MudAppBar>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {


    private void Login()
    {
        NavigationManager.NavigateTo("/Login");
    }
    
    private void Register()
    {
        NavigationManager.NavigateTo("/Register");
    }

    private void Logout()
    {
        AuthService.LogoutAsync();
    }

}